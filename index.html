<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê± CopyCat Installer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: monospace;
            background: #000;
            color: #fff;
            height: 100vh;
            overflow: hidden;
        }
        
        .game-area {
            position: relative;
            width: 100vw;
            height: 100vh;
            border: 20px solid #fff;
            box-sizing: border-box;
        }
        
        .center-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            color: #000;
            padding: 40px;
            border: 3px solid #000;
            text-align: center;
            max-width: 500px;
            z-index: 10;
        }
        
        h1 {
            margin-bottom: 20px;
            font-size: 20px;
        }
        
        .download {
            background: #000;
            color: #fff;
            padding: 15px 30px;
            text-decoration: none;
            display: inline-block;
            margin: 20px 0;
            font-weight: bold;
        }
        
        .download:hover {
            background: #fff;
            color: #000;
            border: 2px solid #000;
        }
        
        .steps {
            text-align: left;
            margin-top: 20px;
            font-size: 14px;
        }
        
        .step {
            margin: 5px 0;
        }
        
        .game-info {
            margin-top: 20px;
            font-size: 12px;
        }
        
        .cat {
            position: absolute;
            font-size: 30px;
            transition: all 0.1s ease;
            z-index: 5;
            user-select: none;
        }
        
        .mouse {
            position: absolute;
            font-size: 20px;
            z-index: 5;
            user-select: none;
            transition: all 0.2s ease;
        }
        
        .score {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 20px;
            font-weight: bold;
            z-index: 15;
        }
        
        .instructions {
            position: absolute;
            top: 30px;
            left: 30px;
            font-size: 14px;
            z-index: 15;
            max-width: 200px;
        }
    </style>
</head>
<body>
    <div class="game-area" id="gameArea">
        <div class="instructions">
            Use WASD or Arrow Keys<br>
            Catch the mice! üê≠<br>
            They run away from you!
        </div>
        
        <div class="score" id="score">Score: 0</div>
        
        <div class="center-box" id="centerBox">
            <h1>üê± CopyCat</h1>
            
            <a href="https://github.com/omsandippatil/CopyCat/releases/download/v1.0.0-meow/CopyCat-main.crx" 
               class="download" 
               download="CopyCat-main.crx">
                DOWNLOAD üê±
            </a>
            
            <div class="steps">
                <div class="step">1. Download file above</div>
                <div class="step">2. Go to chrome://extensions/</div>
                <div class="step">3. Enable Developer mode</div>
                <div class="step">4. Drag file to page</div>
                <div class="step">5. Click Add extension</div>
            </div>
            
            <div class="game-info">
                üê± Chrome requires manual install for security<br>
                Play while you wait! Move with WASD/Arrows
            </div>
        </div>
        
        <div class="cat" id="cat">üê±</div>
    </div>

    <script>
        const gameArea = document.getElementById('gameArea');
        const cat = document.getElementById('cat');
        const scoreElement = document.getElementById('score');
        const centerBox = document.getElementById('centerBox');
        
        let catX = 100;
        let catY = 100;
        let score = 0;
        let mice = [];
        
        // Get game area boundaries and center box bounds
        function getGameBounds() {
            const centerBoxRect = centerBox.getBoundingClientRect();
            return {
                minX: 25,
                minY: 25,
                maxX: window.innerWidth - 55,
                maxY: window.innerHeight - 55,
                centerBox: {
                    left: centerBoxRect.left,
                    right: centerBoxRect.right,
                    top: centerBoxRect.top,
                    bottom: centerBoxRect.bottom
                }
            };
        }
        
        // Check if position collides with center box
        function collidesWithCenterBox(x, y, bounds) {
            return x < bounds.centerBox.right && 
                   x + 30 > bounds.centerBox.left && 
                   y < bounds.centerBox.bottom && 
                   y + 30 > bounds.centerBox.top;
        }
        
        // Find valid position that doesn't collide with center box
        function findValidPosition(bounds) {
            let x, y;
            let attempts = 0;
            do {
                x = Math.random() * (bounds.maxX - bounds.minX) + bounds.minX;
                y = Math.random() * (bounds.maxY - bounds.minY) + bounds.minY;
                attempts++;
            } while (collidesWithCenterBox(x, y, bounds) && attempts < 20);
            
            // If can't find valid position, place on edge
            if (attempts >= 20) {
                const side = Math.floor(Math.random() * 4);
                switch(side) {
                    case 0: x = bounds.minX; y = Math.random() * bounds.maxY; break;
                    case 1: x = bounds.maxX; y = Math.random() * bounds.maxY; break;
                    case 2: x = Math.random() * bounds.maxX; y = bounds.minY; break;
                    case 3: x = Math.random() * bounds.maxX; y = bounds.maxY; break;
                }
            }
            
            return { x, y };
        }
        
        // Position cat
        function updateCatPosition() {
            const bounds = getGameBounds();
            
            // Keep cat in bounds
            catX = Math.max(bounds.minX, Math.min(catX, bounds.maxX));
            catY = Math.max(bounds.minY, Math.min(catY, bounds.maxY));
            
            // Check collision with center box and push cat away
            if (collidesWithCenterBox(catX, catY, bounds)) {
                const centerX = (bounds.centerBox.left + bounds.centerBox.right) / 2;
                const centerY = (bounds.centerBox.top + bounds.centerBox.bottom) / 2;
                
                if (catX < centerX) catX = bounds.centerBox.left - 35;
                else catX = bounds.centerBox.right + 5;
                
                if (catY < centerY) catY = bounds.centerBox.top - 35;
                else catY = bounds.centerBox.bottom + 5;
            }
            
            cat.style.left = catX + 'px';
            cat.style.top = catY + 'px';
        }
        
        // Create a mouse
        function createMouse() {
            if (mice.length >= 3) return; // Max 3 mice
            
            const mouse = document.createElement('div');
            mouse.className = 'mouse';
            mouse.textContent = 'üê≠';
            
            const bounds = getGameBounds();
            const pos = findValidPosition(bounds);
            
            mouse.style.left = pos.x + 'px';
            mouse.style.top = pos.y + 'px';
            mouse.mouseX = pos.x;
            mouse.mouseY = pos.y;
            mouse.speed = 2 + Math.random() * 3; // Random speed
            
            gameArea.appendChild(mouse);
            mice.push(mouse);
        }
        
        // Move mice away from cat
        function moveMice() {
            const bounds = getGameBounds();
            
            mice.forEach(mouse => {
                const dx = mouse.mouseX - catX;
                const dy = mouse.mouseY - catY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                // If cat is close, run away
                if (distance < 150) {
                    const angle = Math.atan2(dy, dx);
                    let newX = mouse.mouseX + Math.cos(angle) * mouse.speed;
                    let newY = mouse.mouseY + Math.sin(angle) * mouse.speed;
                    
                    // Keep in bounds
                    newX = Math.max(bounds.minX, Math.min(newX, bounds.maxX));
                    newY = Math.max(bounds.minY, Math.min(newY, bounds.maxY));
                    
                    // Avoid center box
                    if (!collidesWithCenterBox(newX, newY, bounds)) {
                        mouse.mouseX = newX;
                        mouse.mouseY = newY;
                        mouse.style.left = newX + 'px';
                        mouse.style.top = newY + 'px';
                    }
                } else {
                    // Random movement when far from cat
                    if (Math.random() < 0.1) {
                        const randomAngle = Math.random() * Math.PI * 2;
                        let newX = mouse.mouseX + Math.cos(randomAngle) * (mouse.speed / 2);
                        let newY = mouse.mouseY + Math.sin(randomAngle) * (mouse.speed / 2);
                        
                        newX = Math.max(bounds.minX, Math.min(newX, bounds.maxX));
                        newY = Math.max(bounds.minY, Math.min(newY, bounds.maxY));
                        
                        if (!collidesWithCenterBox(newX, newY, bounds)) {
                            mouse.mouseX = newX;
                            mouse.mouseY = newY;
                            mouse.style.left = newX + 'px';
                            mouse.style.top = newY + 'px';
                        }
                    }
                }
            });
        }
        
        // Check collision with mice
        function checkCollisions() {
            mice.forEach((mouse, index) => {
                const dx = mouse.mouseX - catX;
                const dy = mouse.mouseY - catY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 40) {
                    score += 10;
                    scoreElement.textContent = `Score: ${score}`;
                    mouse.remove();
                    mice.splice(index, 1);
                    
                    // Create new mouse after a delay
                    setTimeout(createMouse, 1000);
                }
            });
        }
        
        // Handle keyboard input
        document.addEventListener('keydown', (e) => {
            const speed = 8;
            
            switch(e.key.toLowerCase()) {
                case 'w':
                case 'arrowup':
                    catY -= speed;
                    break;
                case 's':
                case 'arrowdown':
                    catY += speed;
                    break;
                case 'a':
                case 'arrowleft':
                    catX -= speed;
                    break;
                case 'd':
                case 'arrowright':
                    catX += speed;
                    break;
            }
            
            updateCatPosition();
            checkCollisions();
        });
        
        // Game loop
        function gameLoop() {
            moveMice();
            checkCollisions();
            requestAnimationFrame(gameLoop);
        }
        
        // Initialize game
        updateCatPosition();
        
        // Create initial mice
        createMouse();
        setTimeout(createMouse, 2000);
        
        // Start game loop
        gameLoop();
        
        // Periodically spawn new mice if below max
        setInterval(() => {
            if (mice.length < 3) {
                createMouse();
            }
        }, 3000);
        
        // Handle window resize
        window.addEventListener('resize', () => {
            updateCatPosition();
        });
    </script>
</body>
</html>
